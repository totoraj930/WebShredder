{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main.min.js","sourcesContent":["\r\n/* https://ja.wikipedia.org/wiki/Xorshift */\r\nclass Xorshift {\r\n\tconstructor() {\r\n\t\tthis.reset();\r\n\t}\r\n\tset seed(seed) {\r\n\t\tthis._w = seed;\r\n\t\treturn seed;\r\n\t}\r\n\treset() {\r\n\t\tthis._x = 123456789;\r\n\t\tthis._y = 362436069;\r\n\t\tthis._z = 521288629;\r\n\t\tthis._w = 88675123;\r\n\t}\r\n\trandom() {\r\n\t\tlet t = this._x ^ (this._x << 11);\r\n\t\tthis._x = this._y;\r\n\t\tthis._y = this._z;\r\n\t\tthis._z = this._w;\r\n\t\treturn ( this._w=(this._w^(this._w>>19))^(t^(t>>8)) ) % 1000000 / 1000000;\r\n\t}\r\n}\r\nconst xors = new Xorshift();\r\n\r\n\r\nlet $canvas = null;\r\nlet ctx = null;\r\n\r\nlet backImage;\r\nlet origImageData = null;\r\nconst sImageW = 400;\r\nconst sImageH = 600;\r\n\r\nlet $file = null;\r\nlet $splitNum = null;\r\nlet $splitNumRange = null;\r\nlet $duration = null;\r\nlet $durationRange = null;\r\n\r\nlet splitNum = 15;\r\nlet duration = 10000;\r\nlet t = 0;\r\nlet startTime = Date.now();\r\nlet isPlay = false;\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", start);\r\n\r\nfunction shredAnimate() {\r\n\tif (!isPlay) return;\r\n\r\n\tt = (Date.now()-startTime)/duration;\r\n\r\n\tif (t > 1) {\r\n\t\tt = 1;\r\n\t\tupdateShredder();\r\n\t\tshredFinished();\r\n\t} else {\r\n\t\tupdateShredder();\r\n\t\trequestAnimationFrame(shredAnimate);\r\n\t}\r\n}\r\n\r\nfunction updateShredder() {\r\n\tdrawShreddedImage(ctx, origImageData, splitNum, 123456789, t);\r\n\t$canvas.style.transform = `translateY(${t*100}%)`;\r\n}\r\n\r\nfunction shredFinished() {\r\n\tisPlay = false;\r\n\tt = 0;\r\n\tupdateToggleButton();\r\n}\r\nfunction stopShredder() {\r\n\tisPlay = false;\r\n\tt = 0;\r\n\tupdateShredder();\r\n\tupdateToggleButton();\r\n}\r\nfunction pauseShredder() {\r\n\tisPlay = false;\r\n\tupdateToggleButton();\r\n}\r\nfunction playShredder() {\r\n\tisPlay = true;\r\n\tstartTime = Date.now() - duration*t;\r\n\tupdateToggleButton();\r\n\tshredAnimate();\r\n}\r\n\r\nfunction updateToggleButton() {\r\n\tlet text = isPlay? \"Pause\":\"play\";\r\n\tlet $elms = document.querySelectorAll(\".js_action\");\r\n\tfor (let i=0; i < $elms.length; i++) {\r\n\t\tlet $elm = $elms[i];\r\n\t\tif ($elm.getAttribute(\"data-action\") == \"toggle\") {\r\n\t\t\t$elm.innerHTML = text;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction setSplitNum(value) {\r\n\tif (!isFinite(value) || value < 2 || value > 100) return;\r\n\tsplitNum = value-0;\r\n\tupdateOptionView();\r\n}\r\n\r\nfunction setDuration(value) {\r\n\tif (!isFinite(value) || value < 1 || value > 20) return;\r\n\tduration = value * 1000;\r\n\tupdateOptionView();\r\n}\r\n\r\nfunction updateOptionView() {\r\n\t$splitNum.value = splitNum;\r\n\t$splitNumRange.value = splitNum;\r\n\t$duration.value = duration/1000;\r\n\t$durationRange = duration/1000;\r\n}\r\n\r\nfunction setOptionViewListener($elms, func) {\r\n\t$elms.forEach($elm => {\r\n\t\t$elm.addEventListener(\"input\", func);\r\n\t\t$elm.addEventListener(\"change\", func);\r\n\t});\r\n}\r\n\r\nfunction start() {\r\n\tinitShredder();\r\n\t$file = document.querySelector(\"#image_file\");\r\n\t$file.addEventListener(\"change\", event => {\r\n\t\tlet file = event.target.files[0];\r\n\t\tlet reader = new FileReader();\r\n\t\treader.addEventListener(\"load\", async event => {\r\n\t\t\torigImageData =\r\n\t\t\t\tgenerateImageDataForShredder(ctx, await loadImage(event.target.result));\r\n\t\t});\r\n\t\treader.readAsDataURL(file);\r\n\t});\r\n\r\n\r\n\t$splitNum = document.querySelector(\"#split_num\");\r\n\t$splitNumRange = document.querySelector(\"#split_num_range\");\r\n\t$duration = document.querySelector(\"#duration\");\r\n\t$durationRange = document.querySelector(\"#duration_range\");\r\n\r\n\r\n\tsetOptionViewListener([$splitNum, $splitNumRange], event => {\r\n\t\tsetSplitNum(event.target.value);\r\n\t});\r\n\tsetOptionViewListener([$duration, $durationRange], event => {\r\n\t\tsetDuration(event.target.value);\r\n\t});\r\n\r\n\r\n\tupdateOptionView();\r\n\r\n\tlet $elms = document.querySelectorAll(\".js_action\");\r\n\tfor (let i=0; i < $elms.length; i++) {\r\n\t\tlet $elm = $elms[i];\r\n\t\tif (!$elm.hasAttribute(\"data-action\")) return;\r\n\t\tlet action = $elm.getAttribute(\"data-action\");\r\n\t\tif (action == \"toggle\") {\r\n\t\t\t$elm.addEventListener(\"click\", event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tif (isPlay) {\r\n\t\t\t\t\tpauseShredder();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tplayShredder();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if (action == \"stop\") {\r\n\t\t\t$elm.addEventListener(\"click\", stopShredder);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n\r\nasync function initShredder() {\r\n\t$canvas = document.querySelector(\".shredded\");\r\n\t$canvas.width = sImageW;\r\n\t$canvas.height = sImageH;\r\n\tctx = $canvas.getContext(\"2d\");\r\n\tbackImage = await loadImage(\"./img/back.jpg\");\r\n\torigImageData = generateImageDataForShredder(ctx);\r\n}\r\n\r\n\r\nfunction loadImage(url) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tlet image = new Image();\r\n\t\timage.src = url;\r\n\t\timage.addEventListener(\"load\", () => resolve(image));\r\n\t\timage.addEventListener(\"error\", () => reject(\"Error\"));\r\n\t});\r\n}\r\n\r\nfunction generateImageDataForShredder(ctx, image, resize) {\r\n\tctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\tctx.drawImage(backImage, 0, 0);\r\n\tif (image) {\r\n\t\tif (resize) {\r\n\t\t\tlet mag = getMagRatio(image.width, image.height, ctx.canvas.width, ctx.canvas.height);\r\n\t\t\tlet w = Math.round(image.width*mag);\r\n\t\t\tlet h = Math.round(image.height*mag);\r\n\t\t\tlet x = (ctx.canvas.width-w)/2;\r\n\t\t\tlet y = (ctx.canvas.height-h)/2;\r\n\t\t\tctx.drawImage(image, x, y, w, h);\r\n\t\t} else {\r\n\t\t\tctx.drawImage(image, 0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\t}\r\n\t}\r\n\treturn ctx.getImageData(0, 0, $canvas.width, $canvas.height);\r\n}\r\n\r\nfunction getMagRatio(w1, h1, w2, h2) {\r\n\treturn Math.min(w2/w1, h2/h1);\r\n}\r\n\r\nfunction drawShreddedImage(ctx, imageData, splitNum, seed, t) {\r\n\tlet w = imageData.width,\r\n\t\th = imageData.height;\r\n\t\r\n\tctx.clearRect(0, 0, w, h);\r\n\r\n\txors.reset();\r\n\txors.seed = seed;\r\n\r\n\tctx.putImageData(imageData, 0, 0, 0, 0, w, h*(1-t)+15*t);\r\n\r\n\tfor (let i=0; i < splitNum; i++) {\r\n\t\tlet deviation = 15 * xors.random() * t,\r\n\t\t\tdw = ( w - 1*(splitNum-1) ) / splitNum,\r\n\t\t\tdx = dw*i + 1*i,\r\n\t\t\tdy = h*(1-t)+15*t;\r\n\t\tctx.putImageData(imageData, 0, 0-deviation, dx, dy, dw, h-dy);\r\n\t}\r\n}\r\n\r\n"]}